(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8266:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(25729)}])},25729:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return $},default:function(){return J}});var s=n(85893),a=n(64487),l=n(67294),r=n(9008),o=n.n(r),i=n(11163),c=n(41664),d=n.n(c),h=n(76812),u=n(66261),m=n(33299),x=n(92981),p=n(12023),g=n(14258),f=n(75617),b=n(9862),w=n(79659),j=n(38323),v=n(82010),N=n(30399),y=n(11319),k=n(29758),S=n(81829),C=n(635),A=n(45138),I=n(25675),P=n.n(I),E=n(50699),T=n(97910),R=(0,l.memo)(function(e){let{show:t,setShow:n,imageIndex:a,allImages:r,containerWidth:o}=e,handleClose=()=>n(!1),[i,c]=(0,l.useState)(a),d="https://www.google.com/s2/favicons?domain=".concat(new URL(r[i].page_url).hostname),{isXs:h,isMd:u,isSm:m}=(0,T.k)(),x=h?120:200;return(0,s.jsx)(E.Z,{show:t,onHide:handleClose,children:(0,s.jsxs)(E.Z.Body,{className:"px-0",children:[(0,s.jsxs)("button",{style:{display:"flex",alignItems:"left",justifyContent:"left",borderRadius:"50px",color:"white",width:"fit-content"},className:"btn btn-no-border mt-4 lift fs-5 fw-bold pb-3 ps-0",type:"button",onClick:handleClose,children:[(0,s.jsx)("i",{className:"mx-2 fe fe-x"}),"Close"]}),(0,s.jsx)("div",{style:{width:h||u||m?o:1.2*o,height:o/1.5,position:"relative",left:"50%",transform:"translateX(-50%)"},children:(0,s.jsx)(P(),{src:r[i].image_url,layout:"fill",alt:r[i].alt,style:{borderRadius:"10px"},objectFit:"cover"})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},className:"mt-5",children:r.slice(0,4).map((e,t)=>(0,s.jsx)("div",{style:{width:x,height:x,position:"relative",border:t===i?"2px solid #e6f0fd":"none",borderRadius:"12px"},className:"mx-2 mb-5",onClick:()=>c(t),children:(0,s.jsx)(P(),{src:e.image_url,layout:"fill",alt:e.alt,style:{borderRadius:"10px"},objectFit:"cover"})},"image-".concat(e.image_url)))}),(0,s.jsxs)("a",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px",backgroundColor:"#575a7b",borderRadius:"50px",color:"white",width:"fit-content",margin:"auto"},className:"lift",href:r[i].page_url,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("img",{src:d,style:{width:"20px",height:"20px"},className:"ms-1 me-2"}),(0,s.jsx)("span",{className:"me-2",children:new URL(r[i].page_url).hostname})]})]})})}),M=(0,l.memo)(function(e){let{url:t,width:n,height:a,onError:r,onHide:o,allImages:i,containerWidth:c,index:d}=e,[h,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!0);return(0,s.jsxs)("div",{className:"mx-2 mb-4 mt-2",children:[h&&(0,s.jsx)(R,{show:h,setShow:u,allImages:i,imageIndex:d,containerWidth:c}),m&&(0,s.jsx)("div",{style:{width:n,height:a,position:"relative"},children:(0,s.jsx)(P(),{src:t,layout:"fill",alt:"",style:{borderRadius:"10px"},objectFit:"cover",onError:()=>{r()},className:"image-hover",onClick:()=>{u(!0),w.n.track("Image Clicked",{url:t})},onLoadingComplete:e=>{let{naturalWidth:n,naturalHeight:s}=e;console.log(n,s),(n<100||s<100)&&(x(!1),o(t))}})})]})}),D=(0,l.memo)(function(e){let{images:t}=e,n=[...new Set(null==t?void 0:t.filter(e=>(0,f.jv)(e.image_url)).map(e=>e.image_url))],a=(0,l.useRef)(null),[r,o]=(0,l.useState)(75);(0,l.useEffect)(()=>{let updateWidth=()=>{a.current&&o(a.current.offsetWidth)};return window.addEventListener("resize",updateWidth),updateWidth(),()=>window.removeEventListener("resize",updateWidth)},[]);let[i,c]=(0,l.useState)([]),handleImageError=e=>{c(t=>[...t,e])},[d,h]=(0,l.useState)([]),handleHideImage=e=>{h(t=>[...t,e])},u=n&&n.length>0?Math.min(n.length-d.length,S.nb):0,m=Math.min((r-35)/u,500),x=null==t?void 0:t.filter(e=>!d.includes(e.image_url)&&!i.includes(e.image_url));return(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"left"},ref:a,children:null==n?void 0:n.filter(e=>!i.includes(e)&&!d.includes(e)).slice(0,n.length>=S.nb?S.nb-1:S.nb).map((e,t)=>{let n=u===S.nb,a=m;return 1===u?a=r-25:n&&0===t&&(a=2*m),(0,s.jsx)(M,{url:e,width:a,height:m,onError:()=>handleImageError(e),onHide:()=>handleHideImage(e),allImages:x,containerWidth:r,index:t},"answer-image-".concat(e))})})});let F=(0,s.jsxs)("p",{className:"placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12 "}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-12"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-8"})]}),_={strict:!1,output:"mathml"};function FootnoteLink(e){let{href:t="",children:n,...a}=e,{theme:l,setTheme:r,resolvedTheme:o}=(0,v.F)(),i="#333",c="#d6d6d6";if("object"==typeof n&&null!==n&&Array.isArray(n)&&n.length>0){let e=n[0];if(e===f.qz)return(0,s.jsx)("div",{className:"spinner-grow spinner-grow-sm",role:"status"});if(Number.isInteger(Number(e))||Number.isInteger(Number(e.substring(1,e.length-1))))return(0,s.jsx)(A.Z,{message:t,placement:"top",children:(0,s.jsx)("sup",{children:(0,s.jsx)("a",{href:t,target:"_blank",className:"me-1",rel:"noopener noreferrer",style:"dark"===o?{display:"inline-block",borderRadius:"50%",backgroundColor:"#333",color:"#fff",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"}:{display:"inline-block",borderRadius:"50%",backgroundColor:"#d6d6d6",color:"#333",width:"15px",height:"15px",textAlign:"center",textDecoration:"none",lineHeight:"15px",fontSize:"0.80em",fontWeight:"bold"},onMouseOver:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onMouseOut:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},onFocus:e=>{let t="#888";return e.currentTarget.style.backgroundColor=t,t},onBlur:e=>{let t="dark"===o?i:c;return e.currentTarget.style.backgroundColor=t,t},children:Number(e)+1})})})}return(0,s.jsx)("a",{href:t,...a,children:n})}let L=(0,l.memo)(function(e){let{markdown:t}=e,{theme:n,setTheme:a,resolvedTheme:l}=(0,v.F)(),r={backgroundColor:S.L5,padding:"3px",borderRadius:"8px",color:"white",cursor:"pointer"},o={backgroundColor:"white",padding:"3px",borderRadius:"8px",color:"black",cursor:"pointer"};return(0,s.jsx)(j.D,{remarkPlugins:[N.Z,k.Z],rehypePlugins:[y.Z,[y.Z,_]],className:"fs-5",components:{p:e=>{let{node:t,...n}=e;return(0,s.jsx)("p",{className:"text-black mb-2 text-break",...n})},ul:e=>{let{node:t,...n}=e,a={...n,ordered:"false"};return(0,s.jsx)("ul",{className:"mb-3",...a})},ol:e=>{let{node:t,...n}=e,a={...n,ordered:"true"};return(0,s.jsx)("ol",{className:"mb-2",...a})},a:FootnoteLink,code(e){let{node:t,inline:n,className:a,children:i,style:c,...d}=e;return n?(0,s.jsx)("code",{onClick:()=>{navigator.clipboard.writeText(String(i))},className:a,style:"dark"===l?o:r,...d,children:i}):(0,s.jsx)(C.Z,{highlighterProps:d,url:"",className:a,children:String(i)})}},children:t})}),errorMessage=e=>(0,s.jsxs)("p",{children:["The inference service may be temporarily unavailable - we have alerts for this and will be fixing it soon.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can try the regenerate button in a few moments.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"If your query still does not work, you can try searching this on"," ",(0,s.jsx)("a",{href:"https://www.google.com/search?q=".concat(encodeURIComponent(e)),children:"Google"})," ","or"," ",(0,s.jsx)("a",{href:"https://www.duckduckgo.com?q=".concat(encodeURIComponent(e)),children:"DuckDuckGo"}),".",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"You can also prefix your question with !g or !ddg"," ",(0,s.jsx)(d(),{href:"/bangs",children:"shortcuts"}),". You may have to enable popups for this to work."]});FootnoteLink.defaultProps={href:""};var components_AnswerPanel=function(e){var t;let{question:n,waitingForStreamStart:a,answer:l,searchResults:r,doneStreaming:o,metadata:i}=e,c=null==i?void 0:i.model_name,d=null==i?void 0:i.mode,h="Answer";return c&&(h+=" | ".concat(c," Model")),void 0!==d&&"Normal"!==d&&(h+="| ".concat(d)),(0,s.jsxs)("div",{children:[(0,s.jsx)("h6",{className:"text-uppercase mt-1",children:h}),(0,s.jsx)(D,{images:null==i?void 0:i.images}),a&&F,a&&F,a&&F,!a&&(null!==(t=(e=>{if(!e)return null;let t=r.map(e=>e.url),formatParagraph=(e,n)=>{let s=e;o||(s=s.replace(f.yV,"[".concat(f.qz,"](#loading)"))),s=(s=(0,f.Yg)(s,t)).replace(f.V7,(e,t)=>r?"".concat(t):"");let a=/\$(?=\d+)/g,l=s.split(/(`[^`]*`)/g);l.forEach((e,t)=>{e.startsWith("`")||(l[t]=e.replace(a,"\\$"))}),s=l.join("");let i=s.match(f.x);if(n&&i&&i.length>0){let e=i[i.length-1];"`"===e?s=s.substring(0,s.length-1):e.split("`").length<3&&(s+="`")}return n&&s.endsWith("[")&&(s=s.substring(0,s.length-1)),s},formatCodeBlock=e=>e.replace(f.PT,(e,t)=>e[0]),n=e.split("```");return n.map((e,t)=>{let a=!o&&t===n.length-1;if(t%2!=0){let n=formatCodeBlock(e),l=a&&!n.endsWith("\n");return(0,s.jsx)(L,{markdown:"```".concat(n).concat(l?"\n":"","```")},t)}return e.trimStart().split("\n\n").map((e,t)=>(0,s.jsx)(L,{markdown:formatParagraph(e,a)},t))})})(l))&&void 0!==t?t:errorMessage(n))]})},Z=n(7907),components_PaginationButtons=function(e){let{pageIndex:t,setPageIndex:n,numPages:a}=e,l=Array.from(Array(a).keys());return(0,s.jsx)("ul",{className:"pagination pagination-sm mb-0",children:l.map((e,a)=>(0,s.jsx)("li",{className:"page-item ".concat(t===a?"active":""),children:(0,s.jsx)("button",{className:"page-link btn-pagination",onClick:()=>n(a),type:"button",children:a+1})},a))})},H=(0,l.memo)(function(e){var t,n;let{searchResults:a,loading:r,openLinksInNewTab:o,customLinks:i,beginEditQuery:c}=e,[h,u]=(0,l.useState)(0),{isXs:m,isSm:x,isMd:p}=(0,T.k)(),[g,b]=(0,l.useState)(!1),w=m||x||p?4:5,j=m?1:5,v=Array.from(Array(j).keys()).map(e=>(0,s.jsxs)("div",{className:"mb-6 placeholder-glow",children:[(0,s.jsx)("span",{className:"placeholder placeholder-sm col-6"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-11"}),(0,s.jsx)("span",{className:"placeholder placeholder-sm col-10"})]},"placeholder ".concat(e))),N=[];for(let e=0;e<a.length;e+=w)N.push(a.slice(e,e+w));if(i.length>0){let e=i.map((e,t)=>({title:"Custom Link ".concat(t),url:e,description:"Your custom link."}));N=[e,...N]}return(0,s.jsxs)("div",{className:"position-relative mt-5",children:[(0,s.jsx)("h6",{className:"text-uppercase d-inline p-0",children:"Sources"}),(0,s.jsx)(A.Z,{message:"Edit Query",children:(0,s.jsx)("button",{type:"button",className:"btn btn-sm p-1",onClick:c,children:(0,s.jsx)("i",{className:"fe fe-edit text-black"})})}),(0,s.jsx)(A.Z,{message:"Filter Sources",children:(0,s.jsx)(d(),{href:"/filters",className:"text-dark",children:(0,s.jsx)("button",{type:"button",className:"btn btn-sm p-1",children:(0,s.jsx)("i",{className:"fe fe-filter text-black"})})})}),r&&v,!r&&!(null==N?void 0:N.length)&&(0,s.jsx)("p",{children:"There were no search results found."}),(0,s.jsx)("div",{className:"row",children:h<N.length&&(null===(t=N[h])||void 0===t?void 0:t.slice(0,g?void 0:w).map((e,t)=>(0,f.jv)(e.url)?(0,s.jsx)("div",{className:"".concat(m||x||p?"col-6":""),children:(0,s.jsx)(Z.Z,{openLinksInNewTab:o,index:t,webResult:e,pageIndex:h})},e.url):null))}),(m||x||p)&&!g&&(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 pt-0 pb-2 btn-no-border lift",onClick:()=>b(!0),children:[(0,s.jsx)("i",{className:"fe fe-plus-circle me-2"}),"Show more sources"]})}),!r&&(!(m||x||p)||(m||x||p)&&g)&&(0,s.jsx)("div",{className:"row mt-2",children:(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(components_PaginationButtons,{pageIndex:h,setPageIndex:u,numPages:null!==(n=null==N?void 0:N.length)&&void 0!==n?n:0})})})]})}),q=n(7895),Q=n(93680),W=n(11676),components_FeedbackModal=function(e){let{show:t,setShow:n,sendFeedback:a,currentFeedback:l}=e,handleClose=()=>n(!1),r=!1===l?"What was the issue? How can it be improved?":"What do you like about the response?";return(0,s.jsx)(E.Z,{show:t,onHide:handleClose,children:(0,s.jsxs)(E.Z.Body,{className:"bg-light",children:[(0,s.jsx)(E.Z.Title,{className:"mb-5",children:"Additional Feedback"}),(0,s.jsxs)(W.Z,{onSubmit:e=>{let t={helpful:l};for(let n=0;n<e.target.elements.length;n+=1)"checkbox"===e.target.elements[n].type&&(t[e.target.elements[n].id]=e.target.elements[n].checked),"textarea"===e.target.elements[n].type&&(t.comment=e.target.elements[n].value);a(t,"Feedback Form"),handleClose(),e.preventDefault()},children:[(0,s.jsxs)(W.Z.Group,{className:"m-1 mb-5",controlId:"exampleForm.ControlTextarea1",children:[(0,s.jsx)(W.Z.Label,{children:r}),(0,s.jsx)(W.Z.Control,{className:"bg-white",as:"textarea",type:"textarea",rows:3})]}),!1===l&&(0,s.jsxs)(W.Z.Group,{className:"m-1 mb-5",controlId:"formBasicCheckbox",children:[(0,s.jsx)(W.Z.Check,{type:"checkbox",label:"Answer isn't true",id:"inaccurate"}),(0,s.jsx)(W.Z.Check,{type:"checkbox",label:"Answer is incomplete",id:"tooShort"}),(0,s.jsx)(W.Z.Check,{type:"checkbox",label:"I waited too long",id:"tooSlow"})]}),(0,s.jsx)(Q.Z,{className:"m-1",variant:"secondary",onClick:handleClose,children:"Close"}),(0,s.jsx)(Q.Z,{className:"m-1",variant:"primary",type:"submit",children:"Submit"})]})]})})},components_RegenerateFeedback=function(e){let{sendFeedback:t}=e,{isXs:n}=(0,T.k)();return(0,s.jsx)("div",{className:"alert bg-light alert-dismissible fade show p-3",role:"alert",children:(0,s.jsxs)("div",{className:n?"container justify-content-center d-flex text-center":"container d-flex",style:n?{flexWrap:"wrap"}:{},children:[(0,s.jsx)("div",{className:"flex-grow-1 align-self-center",children:(0,s.jsx)("strong",{children:"Was this response better or worse?"})}),(0,s.jsxs)("div",{className:n?"row":"",children:[(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("better"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"}),"Better"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("worse"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"}),"Worse"]}),(0,s.jsxs)("button",{className:"btn btn-light btn-sm m-1",onClick:()=>t("same"),type:"button",children:[(0,s.jsx)("i",{className:"fe fe-minus-circle m-2"}),"Same"]})]})]})})};function ShareMenu(e){let{question:t,currentAnswer:n,conversationContent:a}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-share m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Share "}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(window.location.href)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Link For Sharing"]})}),n&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(n)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy this Answer"]})}),a&&(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{navigator.clipboard.writeText(a)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard-fill m-1",viewBox:"1 2 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"})}),"Copy Conversation"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{let e="https://twitter.com/intent/tweet?text=Phind Search: ".concat(encodeURIComponent(t),"&url=").concat(encodeURIComponent(window.location.href));window.open(e,"_blank")},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-twitter m-1",viewBox:"0 2 16 16",children:(0,s.jsx)("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})}),"Twitter"]})})]})]})}ShareMenu.defaultProps={currentAnswer:"",conversationContent:""};var U=(0,l.memo)(ShareMenu),components_SuggestedFollowups=function(e){let{suggestedFollowups:t,customSearchHandler:n}=e,handleClick=async(e,t)=>{e.preventDefault(),n&&n(t,""),w.n.track("Click Suggested Followup",{prompt:t})},{isXs:a,isSm:l,isMd:r}=(0,T.k)();return(0,s.jsxs)("div",{className:(a||l||r)&&(null==t?void 0:t.length)?"mt-5 mb-6":"my-5",children:[!!(null==t?void 0:t.length)&&(0,s.jsx)("h6",{className:"text-uppercase mt-1",children:"Suggestions"}),!!(null==t?void 0:t.length)&&t.slice(0,a?3:t.length).map(e=>(0,s.jsx)(p.E.a,{onClick:t=>handleClick(t,e),initial:{opacity:0},animate:{opacity:1},children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start ms-0 me-2",children:e})},e))]})},G=n(50897),O=(0,l.memo)(function(e){let{regenerateAnswer:t,answerIndex:n,requestsLeftForGPT4:a,session:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",className:"btn btn-sm ms-n2 px-2 btn-no-border dropdown dropdown-toggle lift","data-bs-toggle":"dropdown","aria-expanded":"false",children:[(0,s.jsx)("i",{className:"fe fe-refresh-cw me-2"}),"Rewrite"]}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" Rewrite your answer "}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,void 0,"Phind Model")},children:"Use Phind Model"})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",type:"button",onClick:()=>{t(n,void 0,void 0,"GPT-4")},children:"Use GPT-4"})}),(0,s.jsx)("li",{children:(0,s.jsxs)("p",{className:"mt-5 mb-0 fs-6 text-break",children:[(0,s.jsxs)("span",{className:"text-primary",children:[Math.max(a,0)," ","GPT-4 uses left",l&&" today","."]}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-always-dark",children:"Phind Model has unlimited uses."}),!l&&a<=0&&(0,s.jsx)("button",{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{w.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses."}),l&&a<=0&&(0,s.jsx)(d(),{className:"btn fs-6 p-0 fw-bold text-always-dark text-decoration-underline",type:"button",href:"/plans",children:"Upgrade for more daily GPT-4 model uses."})]})})]})]})}),B=n(12074);function MastheadSearchbox(e){let{placeholder:t,initialQuestionFromCache:n,defaultNumRowsToShow:a,customSearchHandler:r,children:o,initialContext:i,loading:c,answerModel:d,setSearchBoxHasText:h,maxTokenLimit:u=S.M9}=e,[m,x]=(0,l.useState)(n),[p,g]=(0,l.useState)(i),[b,j]=(0,l.useState)(!!i),v=(0,l.useRef)(null),N=(0,l.useRef)(null);function resizeTextArea(e){if(null==e?void 0:e.current){let t=e.current;t.style.height="auto";let n=Math.min(t.scrollHeight,512);t.style.height="".concat(n,"px")}}(0,l.useEffect)(()=>{resizeTextArea(v),resizeTextArea(N),h(m.length>0)},[v,m,N,p]);let handleKeyDown=e=>{"Tab"===e.key&&j(!0),e.shiftKey&&"Enter"===e.key||"Enter"!==e.key||(e.preventDefault(),handleSubmit(e))},handleSubmit=async e=>{if(e.preventDefault(),c)return;let t=m.trim(),n=p?"&c=".concat(encodeURIComponent(p)):"";if(""!==t){if(y>=S.$x){let e=(0,f.yF)(t,u,d),n=(0,f.yF)(p,u-(0,f.In)(e,d),d);localStorage.setItem("long-question",e),localStorage.setItem("long-context",n)}w.n.track("Searchbox Submit",{question:t,context:p}),r?await r(t,p,d):y>=S.$x?window.location.href="/search?source=searchbox&long=true":window.location.href="/search?q=".concat(encodeURIComponent(m)).concat(n,"&source=searchbox")}},y=m.length+p.length,k=(0,f.In)("".concat(m,"\n").concat(p),d),{isXs:C}=(0,T.k)(),I=C?"on":"off";return(0,s.jsxs)("form",{className:"mb-3",onSubmit:e=>handleSubmit(e),children:[(0,s.jsxs)("div",{className:"shadow darkmode-light position-relative search-bar-input-group container px-1 m-0",children:[(0,s.jsx)("textarea",{tabIndex:0,ref:v,autoFocus:!0,autoComplete:"off",autoCorrect:I,autoCapitalize:"off",spellCheck:"false",name:"q",className:"form-control bg-white darkmode-light searchbox-textarea search-bar-hide-scrollbar fs-5 px-2 pt-2 pb-0 my-1 mx-0 row",rows:a,placeholder:t,"aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:handleKeyDown,onChange:e=>{let t=e.target.value;x(t),t.length>=256&&j(!0)},value:m}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-8 d-flex justify-content-start",children:o}),(0,s.jsxs)("div",{className:"col-4 d-flex justify-content-end",children:[(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm fs-6 px-2 pb-2 ".concat(k>=u?"text-danger":"darkmode-light"),style:{width:k<256?"7em":"auto",visibility:k>256?"visible":"hidden"},children:[k," tokens ",k>=u&&"(will truncate)"]}),(0,s.jsx)(A.Z,{message:"Add Context",children:(0,s.jsxs)("button",{type:"button",className:"btn rounded-1 btn-sm p-1 mx-1 fs-5 lift",onClick:e=>{e.preventDefault(),p||j(!b)},children:[" ",(0,s.jsx)("i",{className:"fe fe-code ".concat(0===m.length?"masthead-textbox":"darkmode-light")})," "]})}),(0,s.jsxs)("button",{type:"submit",className:"btn btn-sm mx-1 rounded-1 fs-5 p-1 lift ".concat(""),children:[" ",(0,s.jsx)("i",{className:"fe fe-search ".concat(0===m.length?"masthead-textbox":"darkmode-light")})," "]})]})]})]}),b&&(0,s.jsx)("div",{className:"shadow darkmode-light mt-5 rounded-1",children:(0,s.jsx)("textarea",{tabIndex:0,ref:N,autoComplete:"off",autoCorrect:I,autoCapitalize:"off",spellCheck:"false",name:"c",className:"form-control bg-white darkmode-light searchbox-textarea fs-5 m-1 p-2 rounded-1",rows:a,placeholder:"Put any extra code or context here.","aria-label":t,style:{resize:"none",height:"auto"},onKeyDown:handleKeyDown,onChange:e=>{g(e.target.value)},value:p})})]})}MastheadSearchbox.defaultProps={customSearchHandler:null,children:null,loading:!1,maxTokenLimit:S.M9};var K=n(92218),z=(0,l.memo)(function(){let[e,t]=(0,l.useState)(!1);if((0,l.useEffect)(()=>t(!0),[]),!e)return null;let trackClick=e=>{w.n.track("Click Explore Card",{prompt:e})},n=(0,f.TV)(S.A),a=n.slice(0,4);return(0,s.jsx)("div",{className:"m-0",children:(0,s.jsx)("div",{className:"container col-10",children:(0,s.jsx)("div",{className:"mt-6 p-2 text-center",children:a.map(e=>(0,s.jsx)("a",{href:"/search?q=".concat(encodeURIComponent(e)),onClick:()=>trackClick(e),children:(0,s.jsx)("button",{type:"button",className:"lift shadow-none btn btn-light btn-sm m-1 text-wrap text-start py-1 px-2",children:e})},e))})})})}),V=n(51565);function Masthead(e){let{isValidProPlan:t,numRequestsDone:n,planName:a,planNotExpired:r,isLoggedIn:o,customSearchHandler:i,answerModel:c,setAnswerModel:h}=e,[u,x]=(0,q.Z)("useCreativeMode",!1),{headerHeight:p}=(0,V.g)(),{data:g}=(0,m.useSession)(),[b]=(0,q.Z)("numNotLoggedInRequestsDone",0),w=g?(0,f.N7)(a,r)-n:S.BH-b,[j,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>v(!0),[]);let k=(0,s.jsx)(s.Fragment,{children:"Your AI search engine and pair programmer."}),{isXs:C}=(0,T.k)(),I=t?S.CZ:S.M9,E="Phind Model"===c||"GPT-4"===c&&w<=0?S.c5:I;return j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"row justify-content-center",children:[(0,s.jsxs)("div",{className:"col-10",children:[!C&&(0,s.jsx)("h1",{className:"display-4 text-center",style:{visibility:"hidden",height:0},children:k}),(0,s.jsx)("h1",{className:"display-4 mb-8 text-center mt-5",children:(0,s.jsx)(d(),{href:"/search?home=true",children:(0,s.jsx)(P(),{className:"img-fluid darkmode-img",width:187.5,height:65,src:"/images/phind_v2.svg",alt:"...",style:{maxWidth:"100%",height:"auto"},priority:!0})})})]}),(0,s.jsx)("div",{className:"col-lg-8 col-md-8 col-10",children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)(MastheadSearchbox,{placeholder:C?"Ask anything.":"Ask anything. What are you stuck on?",initialQuestionFromCache:"",initialContext:"",defaultNumRowsToShow:2,answerModel:c,maxTokenLimit:E,customSearchHandler:i,setSearchBoxHasText:y,children:(0,s.jsx)(A.Z,{message:"Select your preferred answering model.",children:(0,s.jsx)(K.Z,{answerModel:c,setAnswerModel:h,requestsLeftForGPT4:w,session:g,useCreativeMode:u,setUseCreativeMode:x,searchBoxHasText:N,isOnMasthead:!0})})})})})]}),j&&!o&&!C&&(0,s.jsx)(z,{}),(0,s.jsx)("div",{style:{height:p,transition:"height ".concat(S.Qs," linear")}})]}):null}function DebugInfo(e){let{serverIndicatorTiming:t,setShowDebugInfo:n}=e,[a,r]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"p-4 mx-5 mb-5 border border-secondary rounded",children:[(0,s.jsxs)("div",{className:"d-flex flex flex-row",children:[(0,s.jsx)("span",{children:"Debug info"}),(0,s.jsx)("span",{style:{flex:1}}),(0,s.jsx)("i",{className:"fe fe-maximize-2",style:{cursor:"pointer"},onClick:()=>{r(e=>!e)}}),(0,s.jsx)("i",{className:"fe fe-x ms-2",style:{cursor:"pointer"},onClick:()=>{n(!1)}})]}),(0,s.jsx)("hr",{}),(0,s.jsx)("table",{style:{width:"100%"},children:t.slice(1).map((e,n)=>{let[l,r]=e;return(0,s.jsxs)("tr",{style:a?{height:"".concat(Math.floor((r-t[n][1])/10),"px"),background:"rgb(0, ".concat(20*n,", 0)")}:{},children:[(0,s.jsx)("td",{children:!a&&(0,s.jsx)("div",{className:"rounded me-3",style:{width:"10px",height:"10px",background:"rgb(0, ".concat(Math.floor(Math.min(255,(r-t[n][1])/5)),", 0)")}})}),(0,s.jsx)("td",{children:(0,s.jsxs)("b",{children:[l,": "]})}),(0,s.jsxs)("td",{className:"ps-3",children:[(r-t[n][1]).toLocaleString(),"ms"]})]},"".concat(l,"-").concat(r))})})]})}Masthead.defaultProps={isValidProPlan:!1,isLoggedIn:!1,customSearchHandler:void 0};let Y={question:"",searchQuery:"",searchResults:[],answer:"",context:"",previousAnswers:[],customLinks:[],metadata:{}},X="/search?home=true";function Search(e){let{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u}=e,m=(0,i.useRouter)(),p=(0,l.useRef)(X),[g,f]=(0,l.useState)((0,x.Mc)());return(0,l.useEffect)(()=>{m.asPath===X&&p.current!==m.asPath&&f((0,x.Mc)()),p.current=m.asPath},[m.asPath]),(0,s.jsx)(SearchComponent,{cachedAnswerHistory:t,numRequestsDone:n,phindPlan:a,paidPlanValid:r,anonUserId:o,cachedSuggestedFollowupQuestions:c,chatHistoryEnabled:d,isLoggedIn:h,backendToken:u},g)}function SearchComponent(e){var t,n,r;let{cachedAnswerHistory:c,numRequestsDone:j,phindPlan:v,paidPlanValid:N,anonUserId:y,cachedSuggestedFollowupQuestions:k,chatHistoryEnabled:C,isLoggedIn:I,backendToken:P}=e,E=(0,i.useRouter)(),{isSidebarOpen:R}=(0,B.A)(),{headerHeight:M}=(0,V.g)(),D=(0,l.useRef)((0,x.Mc)());(0,l.useEffect)(()=>{let handleRouteChange=e=>{(e===X||e.startsWith("/agent"))&&(D.current=(0,x.Mc)())};return E.events.on("routeChangeStart",handleRouteChange),()=>{E.events.off("routeChangeStart",handleRouteChange)}},[E]);let{query:F}=E,{q:_,cache:L,fromExtension:Z,source:Q,c:W,long:K,home:z}=F,{data:$}=(0,m.useSession)(),[J,ee]=(0,l.useState)(!1);(0,l.useEffect)(()=>{ee(!0)},[]);let[et,en]=(0,l.useState)("true"===z),[es,ea]=(0,l.useState)(!1),[el]=(0,q.Z)("useCreativeMode",!1),er=(0,l.useRef)(new AbortController),{signal:eo}=er.current,[ei,ec]=(0,l.useState)(null!=c?c:[]),[ed,eh]=(0,l.useState)(null!=k?k:[]),eu=ei.length,em=null==ei?void 0:ei.map(e=>e.question),ex=null==em?void 0:em[0],ep=null==em?void 0:em.slice(-1)[0],eg=null==ei?void 0:null===(t=ei.slice(-1)[0])||void 0===t?void 0:t.context,[ef,eb]=(0,l.useState)([]),[ew,ej]=(0,q.Z)("phindDebugMode",!1);(0,l.useEffect)(()=>{let handleKeyDown=e=>{"Escape"===e.key&&e.shiftKey&&e.metaKey&&(ej(e=>!e),e.preventDefault())};return window.addEventListener("keydown",handleKeyDown),()=>{window.removeEventListener("keydown",handleKeyDown)}},[]);let[ev,eN]=(0,q.Z)("numNotLoggedInRequestsDone",0),ey=100;J&&($?ey=(0,f.N7)(v,N)-j:null===$&&(ey=S.BH-ev));let[ek,eS]=(0,q.Z)("answerModel",S.Wg),eC=("Phind Pro"===v||"Phind Pro Yearly"===v)&&N,eA="Phind Model"===ek||"GPT-4"===ek&&ey<=0,eI=eC?S.CZ:S.M9,eP=eA?S.c5:eI,eE=K&&window.localStorage,eT=eE&&localStorage.getItem("long-question")||"",eR=eE&&localStorage.getItem("long-context")||"",eM=null!==(n=null!=_?_:eT)&&void 0!==n?n:"",eD=null!==(r=null!=W?W:eR)&&void 0!==r?r:"",[eF,e_]=(0,l.useState)(Array(eu).fill(!1)),[eL,eZ]=(0,l.useState)(Array(eu).fill(!1)),[eH,eq]=(0,l.useState)(Array(eu).fill(!0)),[eQ,eW]=(0,l.useState)(null),[eU,eG]=(0,l.useState)(!1),[eO,eB]=(0,l.useState)(-1),[eK,ez]=(0,l.useState)(!1),[eV,eY]=(0,q.Z)("upgradeModalAllowed",!0),[eX,e$]=(0,l.useState)(Array(eu).fill(!1)),eJ={},e0=new Date,e1=e0.toLocaleDateString(),e5="";e5=window.navigator.language;let{isXs:e2}=(0,T.k)(),{isMd:e6}=(0,T.k)(),{isSm:e3}=(0,T.k)(),e8={date:e1,language:e5,detailed:!0,anonUserId:y,answerModel:ek,creativeMode:el},firstSearchHandler=(e,t,n)=>{D.current=(0,x.Mc)();let s=e;(0,f.In)(e,n)>eP&&(s=(0,f.yF)(e,eP,n));let a={...Y,question:s,context:t};ec([a]),e_([!0]),eZ([!0]),ec(e=>(0,f.N6)(e,0,{...a,checkedQuestion:s})),performSearch(0,s,t),en(!1)},handleStopGenerating=()=>{er.current.abort(),er.current=new AbortController,eZ(e=>e.map(()=>!1)),eq(e=>e.map(()=>!0))};(0,l.useEffect)(()=>{let handleEsc=e=>{"Escape"===e.key&&handleStopGenerating()};return window.addEventListener("keydown",handleEsc),()=>{window.removeEventListener("keydown",handleEsc)}},[]);let removeAnswer=async e=>{var t;(null===(t=window)||void 0===t?void 0:t.confirm("Are you sure you want to remove this answer?"))&&(w.n.track("Click Remove Answer",{answer:ei[e]}),ec(t=>{var n;let s=t.filter((t,n)=>n!==e),a=null===(n=s.slice(-1)[0])||void 0===n?void 0:n.question;if(!C)return s;let l=null!=L?L:void 0;return l&&(0===s.length?(0,b.do)([l]).then(()=>{E.push(X)}):(0,b.tI)(l,a,s)),s}))},trackSearchEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feedback",n={question:ep,context:eg,source:Z?"extension":Q,answerCount:ei.length,options:e8,searchOptions:eJ,phindPlan:v};w.n.track(t,{...n,...e})},regenerateAnswer=(e,t,n,s)=>{if(e>=ei.length){console.error("Answer index out of bounds");return}let a=ei[e],l=t||ep;w.n.track("Regenerate Answer",{question:l,previousAnswerData:a,answerIndex:e});let{searchResults:r}=a,o=r;n&&r&&(o=r.filter((e,t)=>n[t]));let{previousAnswers:i}=a,c=(0,f.N6)(ei,e,{...a,searchResults:o,question:l,previousAnswers:[...i,a.answer]});ec(c);let d={...e8,regenerate:!0};s&&(d={...d,answerModel:s}),generateAnswer(e,c,d),(null==a?void 0:a.answer)&&eB(e)},[e4,e7]=(0,l.useState)(!1),fetchFollowupSearchResults=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eu,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e4)return;e7(!0),eh([]);let l={...Y,question:e,context:t};ec(e=>(0,f.N6)(e,n,l)),e_(e=>(0,f.N6)(e,n,!0)),eZ(e=>(0,f.N6)(e,n,!0)),u.OK.scrollTo("answer-".concat(n),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110}),performSearch(n,e,t,s,a),e7(!1)};(0,l.useEffect)(()=>{0===ey&&eV&&!eK&&"GPT-4"===ek&&J&&ez(!0)},[ey,J]),(0,l.useEffect)(()=>{if(J&&window.localStorage&&E&&E.isReady&&!z&&!L){if(eM)0===ei.length&&firstSearchHandler(eM,eD,ek)}},[_,E,J]);let[e9,te]=(0,l.useState)(!1),performSearch=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(""===t)return;let l=[],r=t.match(/(?:^|\s)(https?:\/\/\S+)(?:\s|$)/g);r&&r.forEach(e=>{let t=e.trim();!(t.includes("127.0.0")||t.includes("localhost"))&&(l.includes(t)||l.push(t))});let o=(0,f.hC)(t);te(o);let i=(0,f.xs)(t);if(i){window.open(i,"_self","noopener,noreferrer");return}let c={...Y,question:t,context:n};ec(t=>(0,f.N6)(t,e,c)),e_(t=>(0,f.N6)(t,e,!0)),eZ(t=>(0,f.N6)(t,e,!0)),(t=>{let n=(0,f.N6)(ei,e,t);ec(n),s&&ec(e=>e.slice(0,a+1));let r=el?e8:{...e8,customLinks:l};o||generateAnswer(e,n,r)})(c)},copyAnswer=e=>{let{answer:t}=ei[e],n=(0,f.N6)(eX,e,!0);e$(n),w.n.track("Click Copy Answer",{answer:t}),navigator.clipboard.writeText(t)},generateAnswer=function(e,t){let n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e8,l=D.current,r=[["Begin",Date.now()]];if(eb(r),eh([]),!1===eH[e]){console.warn("Did not start new stream as previous stream is still running.");return}let o=-1,i=Date.now();eZ(t=>(0,f.N6)(t,e,!0)),eq(t=>(0,f.N6)(t,e,!1)),eW(null);let{question:c,context:d}=t[e],m=e>=1;if(m){let a=t.slice(0,e).map(e=>"".concat(e.question,"\n").concat(e.context)),l=t.slice(0,e).map(e=>e.answer);n=(0,b.iK)(c,a,l,d,s,P)}else n=(0,b.tA)(c,d,s,P);$||"GPT-4"!==ek||eN(e=>e+1),n.then(async t=>{let n="",s={},d=!0,m=(0,h.j)(t=>{if(l!==D.current){console.warn("Answer UUID changed, ignoring event");return}if("event"===t.type){let{data:h}=t;if(d&&0!==e&&u.OK.scrollTo("answer-".concat(e),{duration:650,delay:0,smooth:"easeInOutQuart",offset:-110}),d=!1,h.includes("<PHIND_INDICATOR>")){let e=h.replace("<PHIND_INDICATOR>","").replace("</PHIND_INDICATOR>","");r.push([e,Date.now()]),eb([...r])}else if(h.includes("<PHIND_BACKEND_ERROR>"))eZ(t=>(0,f.N6)(t,e,!1)),eq(t=>(0,f.N6)(t,e,!0)),a.uT("Backend error: ".concat(h));else if(h.includes("<PHIND_FOLLOWUP>")){let e=h.replace("<PHIND_FOLLOWUP>","").replace("</PHIND_FOLLOWUP>",""),t=JSON.parse(e);eh(e=>[...e,t])}else if(h.includes("<PHIND_DONE/>")){if(eq(t=>(0,f.N6)(t,e,!0)),l!==D.current){console.warn("Answer UUID changed, ignoring answer"),console.log(l,D.current),w.n.track("Search Cancelled by Navigating Away",{question:c,awayPath:window.location.pathname});return}if(eq(t=>(0,f.N6)(t,e,!0)),"/search"!==window.location.pathname){w.n.track("Search Cancelled by Navigating Away",{question:c,awayPath:window.location.pathname});return}ec(t=>{let a={...t[e],answer:n,metadata:s},l=(0,f.N6)(t,e,a),c=r.slice(1).map((e,t)=>{let[n,s]=e;return[n,s-r[t][1]]}).reduce((e,t)=>({...e,[t[0]]:t[1]}),{});return finishGeneratingAnswer(e,l,i,o,c,s),l})}else if(h.includes("<PHIND_METADATA>")){let t=h.replace("<PHIND_METADATA>","").replace("</PHIND_METADATA>",""),n=JSON.parse(t);s={...s,...n},ec(t=>(0,f.N6)(t,e,{...t[e],metadata:{...t[e].metadata,...n}}))}else if(h.includes("<PHIND_WEBRESULTS>")){let t=JSON.parse(h.replace("<PHIND_WEBRESULTS>","").replace("</PHIND_WEBRESULTS>",""));if(e_(t=>(0,f.N6)(t,e,!1)),!t||t.length<=0)return;ec(n=>(0,f.N6)(n,e,{...n[e],searchResults:t}))}else eZ(t=>(0,f.N6)(t,e,!1)),n+=h,ec(t=>(0,f.N6)(t,e,{...t[e],answer:n})),-1===o&&(o=Date.now())}}),x=t.body,p=(0,f.Mz)(x,eo);for await(let e of(0,f.Uj)(p)){let t=new TextDecoder().decode(e);m.feed(t)}}).catch(t=>{console.error(t),a.Tb(t),eZ(t=>(0,f.N6)(t,e,!1)),eq(t=>(0,f.N6)(t,e,!0))})},finishGeneratingAnswer=async(e,t,n,s,a,l)=>{var r,o;let i=null!=L?L:void 0,{question:c,answer:d,context:h}=t[e];C&&(i?await(0,b.tI)(i,c,t):i=await(0,b.Qc)(c,t).then(e=>e.json()).then(e=>e.newKey));let u="/search?cache=".concat(i),m="".concat(window.location.origin).concat(u);(null==$?void 0:null===(r=$.user)||void 0===r?void 0:r.userId)&&w.n.identify(null==$?void 0:null===(o=$.user)||void 0===o?void 0:o.userId);let x=(0,f.In)(c,ek),p=(0,f.In)(h,ek),g=(0,f.In)(d,ek),j=Date.now();trackSearchEvent({answerIndex:e,answer:d,newCachedUrlLink:m,question:c,context:h,questionLength:c.length,answerLength:d.length,contextLength:h.length,combinedQuestionContextLength:c.length+h.length,questionTokens:x,contextTokens:p,combinedQuestionContextTokens:x+p,answerTokens:g,startWaitingForAnswerTime:n,answerBeginGenerationTime:s,answerFinishTime:j,timeToFirstToken:s-n,timeToAnswer:j-n,timeFirstToLastToken:j-s,tokensPerSecond:g/((j-s)/1e3),mixpanelId:null==l?void 0:l.id,debuggingTime:a},"search"),C&&i&&E.replace({pathname:"/search",query:{cache:i}},void 0,{scroll:!1,shallow:!0})},[tt,tn]=(0,l.useState)(Array(eu).fill(!1)),[ts,ta]=(0,l.useState)(Array(eu).fill(!1));return((0,l.useEffect)(()=>{"/search?home=true"===E.asPath&&en(!0)},[E.asPath]),J)?et?(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-12 col-md-12",children:(0,s.jsx)("div",{style:{margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - ".concat(M,"px)"),transition:"height ".concat(S.Qs," linear")},children:(0,s.jsx)(Masthead,{isValidProPlan:eC,numRequestsDone:j,planName:v,planNotExpired:N,isLoggedIn:I,customSearchHandler:(e,t)=>{E.replace({pathname:"/search",query:{q:e,...t&&{c:t}}},void 0,{scroll:!0,shallow:!0})},answerModel:ek,setAnswerModel:eS})})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:ep})}),(0,s.jsx)(components_FeedbackModal,{show:eU,setShow:eG,sendFeedback:trackSearchEvent,currentFeedback:eQ}),(0,s.jsx)(G.Z,{show:eK,setShow:ez,setShowUpgradeModalAllowed:eY,isLoggedIn:null!=$}),(0,s.jsxs)("div",{className:"container-xl",children:[(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,s.jsx)("div",{children:ey<=0&&"GPT-4"===ek&&($?(0,s.jsx)(A.Z,{message:"You get 10 free GPT-4 model uses each day. Upgrade for higher limits. You have unlimited fast model uses after your best model uses expire.",placement:"bottom",children:(0,s.jsx)(d(),{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",href:"/plans",children:"Upgrade for more daily GPT-4 uses"})}):(0,s.jsx)("button",{className:"btn fs-6 p-0 mt-4 fw-bold text-dark text-decoration-underline",type:"button",onClick:()=>{(0,m.signIn)().then(()=>{w.n.track("Sign In")})},children:"Sign in for more GPT-4 model uses"}))})})}),ei.map((e,t)=>{let{question:n,searchResults:a,answer:l,searchQuery:r,customLinks:o,metadata:i,context:c}=e,d="".concat(n).concat(r),h=t===ei.length-1,m=n.length>150?"".concat(n.slice(0,150),"..."):n,beginEditQuery=()=>{eH[t]&&(w.n.track("Click Edit Query",{question:n,searchQuery:r,answerIndex:t}),ta(e=>(0,f.N6)(e,t,!e[t])))};return(0,s.jsxs)("div",{style:{minHeight:h?"calc(100vh - ".concat(M,"px)"):0},children:[(0,s.jsx)("div",{className:"pt-6 pb-1",children:(0,s.jsx)("hr",{className:"separator my-0"})}),(0,s.jsxs)(u.W_,{name:"answer-".concat(t),className:"row",children:[(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:eH[t]||eL[t]?(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",style:{visibility:"hidden"},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]}):(0,s.jsxs)("button",{className:"btn btn-no-border btn-sm mb-0 mt-1 px-0 py-0 ms-n2 lift",onClick:()=>{w.n.track("Stop Generating",{question:n}),handleStopGenerating()},type:"button",children:[(0,s.jsx)("i",{className:"fe fe-square m-2"}),"Stop Generating [Esc]"]})}),(0,s.jsx)("div",{className:"col-lg-8 col-xl-8",children:(0,s.jsxs)("div",{className:"mb-0",children:[!tt[t]&&(0,s.jsx)(A.Z,{message:"Edit Question",children:(0,s.jsx)("span",{className:n!==m?"fs-5 mb-3 font-monospace":"fw-bold fs-2 mb-3",style:{whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"pointer"},onClick:()=>{eH[t]&&(w.n.track("Click Edit Question",{question:n,searchQuery:r,answerIndex:t}),tn(e=>(0,f.N6)(e,t,!0)))},children:es?n:m})}),tt[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.Z,{placeholder:"Edit your question.",initialQuestionFromCache:n,initialContext:c,defaultNumRowsToShow:1,customSearchHandler:(e,n)=>{fetchFollowupSearchResults(e,n,t,!0,t),tn(e=>(0,f.N6)(e,t,!1))},answerModel:ek,maxTokenLimit:eP})}),(0,s.jsx)("button",{className:"btn btn-no-border lift ms-n2 btn-sm",type:"button",onClick:()=>{tn(e=>(0,f.N6)(e,t,!1))},children:"Cancel"})]}),!ts[t]&&t>0&&n!==m?(0,s.jsx)(A.Z,{message:"Show Full Question",children:(0,s.jsx)("i",{className:es?"fe fe-chevron-up":"fe fe-chevron-down",onClick:()=>{ea(!es)}})}):null]})}),(e2||e3||e6)&&(0,s.jsx)("div",{className:e9?"col-lg-8 col-xl-7":"col-lg-4 col-xl-4",children:(0,s.jsxs)("div",{className:"container-xl web-container p-0 ms-0",children:[!eH[t]&&(0,s.jsx)(H,{customLinks:o,openLinksInNewTab:!0,searchResults:a,loading:eF[t],beginEditQuery:beginEditQuery}),eH[t]&&(0,s.jsx)(H,{customLinks:o,openLinksInNewTab:!0,searchResults:a,loading:eF[t],beginEditQuery:beginEditQuery})]})}),!e2&&!e3&&!e6&&(0,s.jsx)("div",{className:"col-lg-4 col-xl-4",children:(0,s.jsx)("div",{className:e2||e3||e6?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 me-0",children:ts[t]&&(0,s.jsx)("div",{onBlur:()=>{ta(e=>(0,f.N6)(e,t,!1))},children:(0,s.jsx)(g.Z,{placeholder:"Edit search query",initialContext:"",initialQuestionFromCache:r,defaultNumRowsToShow:1,answerModel:ek,customSearchHandler:(e,n)=>{performSearch(t,e,c),ta(e=>(0,f.N6)(e,t,!1))}})})})}),!e9&&(0,s.jsxs)("div",{className:"col-lg-8 col-xl-8 mt-5",children:[(0,s.jsxs)("div",{className:"",children:[ew&&h&&(0,s.jsx)(DebugInfo,{serverIndicatorTiming:ef,setShowDebugInfo:ej}),eH[t]&&(0,s.jsx)(components_AnswerPanel,{question:n,answer:l,waitingForStreamStart:eL[t],searchResults:a,doneStreaming:eH[t],metadata:i}),!eH[t]&&(0,s.jsx)(components_AnswerPanel,{question:n,answer:l,waitingForStreamStart:eL[t],searchResults:a,doneStreaming:eH[t],metadata:i})]}),!eL[t]&&eH[t]&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-n2 mb-4",children:[eO===t&&(0,s.jsx)(components_RegenerateFeedback,{sendFeedback:e=>{let n=ei[t].previousAnswers.slice(-1)[0];trackSearchEvent({regenerate:e,previousAnswer:n,answer:l},"Regenerate Feedback"),eB(-1)}}),(0,s.jsx)(O,{regenerateAnswer:regenerateAnswer,answerIndex:t,requestsLeftForGPT4:ey,session:$}),(null===eQ||!0===eQ)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===eQ&&(trackSearchEvent({helpful:!0}),eW(!0),eG(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-up m-2"})}),(null===eQ||!1===eQ)&&(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>{null===eQ&&(trackSearchEvent({helpful:!1}),eW(!1),eG(!0))},type:"button",children:(0,s.jsx)("i",{className:"fe fe-thumbs-down m-2"})}),(0,s.jsx)("button",{className:"btn btn-no-border btn-sm mx-0 px-0 lift",onClick:()=>copyAnswer(t),type:"button",children:eX[t]?(0,s.jsx)("i",{className:"fe fe-check text-success mx-2"}):(0,s.jsx)("i",{className:"fe fe-copy mx-2"})}),(0,s.jsx)("button",{type:"button",className:"btn btn-no-border btn-sm mx-0 px-0 lift dropdown dropdown-toggle m-1","data-bs-toggle":"dropdown","aria-expanded":"false",children:(0,s.jsx)("i",{className:"fe fe-edit m-2"})}),(0,s.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2",children:[(0,s.jsx)("h6",{className:"dtopdown-header text-uppercase",children:" modify "}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{u.OK.scrollTo("answer-".concat(t),{duration:400,delay:0,smooth:"easeInOutQuart",offset:-110}),tn(e=>(0,f.N6)(e,t,!0))},children:[(0,s.jsx)("i",{className:"fe fe-edit m-1"}),"Edit Question"]}),(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>{u.OK.scrollTo("answer-".concat(t),{duration:400,delay:0,smooth:"easeInOutQuart",offset:-110}),ta(e=>(0,f.N6)(e,t,!0))},children:[(0,s.jsx)("i",{className:"fe fe-edit m-1"}),"Edit Search Query"]}),(0,s.jsxs)("button",{className:"dropdown-item",type:"button",onClick:()=>removeAnswer(t),children:[(0,s.jsx)("i",{className:"fe fe-trash m-1"}),"Delete Answer"]})]})]}),(0,s.jsx)(U,{question:ex,currentAnswer:l,conversationContent:ei.map(e=>"## ".concat(e.question,"\n").concat(e.answer)).join("\n\n")})]}),eu<=S.Ni&&!eL.some(e=>!0===e)&&!eH.some(e=>!1===e)&&(0,s.jsx)("div",{className:"fixed-bottom bg-gradient-light",style:{pointerEvents:"none"},children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"".concat(R?"col-lg-2":"col-lg-0"," sidebar mt-0 p-0")}),(0,s.jsx)("div",{className:"".concat(R?"col-lg-10":"col-lg-12"," sidebar"),children:(0,s.jsx)("div",{className:"container-xl",children:(0,s.jsx)("div",{className:"col-xl-12",style:{pointerEvents:"auto"},children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsx)(g.Z,{placeholder:"Ask a followup question",initialQuestionFromCache:"",initialContext:"",defaultNumRowsToShow:1,customSearchHandler:(e,t)=>fetchFollowupSearchResults(e,t),answerModel:ek,maxTokenLimit:eP},ei.length)})})})})]})})]}),h&&(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsx)(components_SuggestedFollowups,{suggestedFollowups:ed,customSearchHandler:fetchFollowupSearchResults})})]}),((e2||e3||e6)&&h&&!eH[t]||!e2&&!e3&&!e6)&&(0,s.jsxs)("div",{className:e9?"col-lg-8 col-xl-7":"col-lg-4 col-xl-4",children:[(0,s.jsx)("div",{className:e2||e3||e6?"container-xl web-container p-0 ms-0":"container-xl web-container p-0 ms-0 ".concat(h?"mb-10":""),children:(0,s.jsxs)("div",{style:{visibility:(e2||e3||e6)&&h?"hidden":"visible"},children:[!eH[t]&&(0,s.jsx)(p.E.div,{layout:!0,initial:{opacity:0,scale:1},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,s.jsx)(H,{customLinks:o,openLinksInNewTab:!0,searchResults:a,loading:eF[t],beginEditQuery:beginEditQuery})}),eH[t]&&(0,s.jsx)(H,{customLinks:o,openLinksInNewTab:!0,searchResults:a,loading:eF[t],beginEditQuery:beginEditQuery})]})}),(0,s.jsx)("div",{className:"container-xl mt-4 align-items-end"})]})]})]},d)})]})]}):null}Search.defaultProps={phindPlan:"Phind Free",paidPlanValid:!1,anonUserId:"",cachedAnswerHistory:[],cachedSuggestedFollowupQuestions:[]};var $=!0,J=Search}},function(e){e.O(0,[74,507,241,71,774,888,179],function(){return e(e.s=8266)}),_N_E=e.O()}]);